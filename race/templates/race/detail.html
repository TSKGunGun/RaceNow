{% extends 'base.html' %}
{% load django_bootstrap5 %}

{% block title %}レース主催場所_新規作成{% endblock %}

{% block contents %}
<div class="container py-2">
    <div class="row mb-5">
        <div class="col">
            <div class="display-5">
                {{ object.name }}
                {% if object.status.id == 1 %}
                    <span class="badge bg-info p-2 rounded">{{ object.status.name }}</span>
                {% elif object.status.id == 2 %}
                    <span class="badge bg-warning p-2 rounded">{{ object.status.name }}</span>
                {% elif object.status.id == 3 %}
                    <span class="badge bg-success p-2 rounded">{{ object.status.name }}</span>
                {% elif object.status.id == 4 %}
                    <span class="badge bg-secondary p-2 rounded">{{ object.status.name }}</span>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p class="h5">基本情報</p>
            {% if IsMember == True %}
            <a role="button" class="btn btn-primary" href="#">基本情報更新</a>
            {% endif %}
            <table class="table">
                <tr>
                    <th>開催場所</th>
                    <td>{{ object.place.name }}</td>
                </tr>
                <tr>
                    <th>開催日</th>
                    <td>{{ object.event_date }}</td>
                </tr>
                <tr>
                    <th>主催団体</th>
                    <td><a href="{% url 'organizer_detail' pk=object.organizer.id %}">{{ object.organizer.name }}</a></td>
                </tr>
                <tr>
                    <th>レースカテゴリ</th>
                    <td>{{ object.racetype.category.name }}</td>
                </tr>
                <tr>
                    <th>レース形式</th>
                    <td>{{ object.racetype.name }}</td>
                </tr>
                <tr>
                    <th>ホームページURL</th>
                    <td>{{ object.url }}</td>
                </tr>
            </table>   
        </div>
    </div>
    <div class="row my-3">
        <div class="col">
            <p class="h5">レースレギュレーション</p>
            {% if race.is_regulationsetuped %}
            <table class="table">
                <tr>
                    <th>項目名</th>
                    <th>レギュレーション内容</th>
                </tr>
                {% if race.is_teamrace %}
                <tr>
                    <td>レース形式</td>
                    <td>チームレース</td>
                </tr>
                <tr>
                    <td>チーム最小人数</td>
                    <td>{{ race.team_member_count_min }}</td>
                </tr>
                <tr>
                    <td>チーム最大人数</td>
                    <td>{{ race.team_member_count_max }}</td>
                </tr>
                {% else %}
                <tr>
                    <td>レース形式</td>
                    <td>個人レース</td>
                </tr>
                {% endif %}
                {% if race.is_heat %}
                <tr>
                    <td>ヒート制</td>
                    <td>あり {{ race.heat_count }}ヒート</td>
                </tr>
                {% else %}
                <tr>
                    <td>ヒート制</td>
                    <td>なし(1ヒート)</td>
                </tr>
                {% endif %}
            </table>
            {% else %}
                <div class="p-3 border  border-4 rounded text-center bg-noneinfo" >
                    <p class="h5">未設定</p>
                    <a role="button" class="btn btn-primary" href="{% url 'regulations_setup' pk=race.id %}">レギュレーションの設定</a>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="row">
        <div class="col">
            <p class="h5">その他掲載情報</p>
            {% if object.note %}
                {{ object.note }}
            {% else %}
                <div class="p-3 border  border-4 rounded h5 text-center bg-noneinfo" >
                    記載なし
                </div>
            {% endif %}
        </div>
    </div>

    {% if IsMember == True %}
    <hr>
    <div class="row my-5">
        <div class="col">
            <p class="h5">レース管理</p>
            <a role="button" class="btn btn-primary" href="#">参加者追加</a>
            <a role="button" class="btn btn-primary" href="#">リザルト入力</a>
        </div>
    </div>
    {% endif %}
    {% if IsShowResult %}
    <div class="row">
        <div class="col">
            <p class="h5">リザルト</p>
        </div>
    </div>
    {% endif %}
    <div class="row">
        <div class="col">
            <p class="h5">参加者一覧</p>
            <table>
                <tr>
                    <th>ゼッケンNo</th>
                    <th>エントラント名</th>
                </tr>
            </table>
        </div>
    </div>
</div>
{% endblock %}
